name: CI
on: [push]
jobs:
  dhall:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      - uses: awseward/dhall-typecheck-action@1.1.0
        with:
          dhallVersion: 1.36.0

      - uses: awseward/dhall-lint-action@1.1.0
        with:
          dhallVersion: 1.36.0

  shell:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      - uses: ./.github/actions/shebangcheck
      - uses: ./.github/actions/shellcheck

  local:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      - name: Run checks committed directly to repository
        run:  set -euo pipefail; find .checks -type f | while read -r check_file; do "${check_file}"; done
